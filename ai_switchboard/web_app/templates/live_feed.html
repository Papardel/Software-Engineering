{% extends 'base.html' %}

{% block content %}
<!DOCTYPE html>
<html>
<body>
    <video id="video" controls autoplay>
    <source src="{% url 'live-feed' %}" type="multipart/x-mixed-replace;boundary=frame">
    </video>
    <script>
    (function() {
        navigator.mediaDevices.getUserMedia({ video: true })
            .then(function(stream) {
                var video = document.querySelector('#video');
                if ("srcObject" in video) {
                    video.srcObject = stream;
                } else {
                    video.src = window.URL.createObjectURL(stream);
                }
                video.onloadedmetadata = function(e) {
                    video.play();
                };
            })
            .catch(function(err) {
                console.log(err.name + ": " + err.message);
            });
    })();
    </script>
</body>
</html>
{% endblock %}